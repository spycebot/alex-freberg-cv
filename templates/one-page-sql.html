{% extends 'base.html' %}

{% block head %}

<link rel="stylesheet" href="{{ url_for('static', filename='portfolio.css') }}">

{% endblock %}

{% block body %}

<section class="columnar">
    <p>In the abstract, rest assured that a problem was solved.</p>

    <h2>SQL One Page</h2>
    <p>This one page presents points to bear in mind when entering a technical exam.</p>

    <h3>Concepts</h3>
    <p>SQL operates in a variety of environments, including the script engine of the underlying database, an IDE, or a specialised external tool for interacting with a database.  </p>
    <p>One table per modelled entity. An entity occurrence is once record.</p>
    <p>An attribute is stored for an entity, and corresponds to a field. Ab attribute cab ibkt appear in one entity, unless it is the key attribute in another entity.</p>
    <p>A relationship is established by a foreign key in one entity linking to the primary key in another.</p>

    <p>Order of Precedence in SQL: When combining multiple logical operators, SQL follows a specific order of precedence to determine how conditions are evaluated:</p>
    <ol>
        <li>NOT (Highest precedence)</li>
        <li>AND</li>
        <li>OR (Lowest precedence)</li>
    </ol>    

    <p>Order of Clauses</p>
    <ol>
        <li>SELECT</li>
        <li>FROM</li>
        <li>WHERE</li>
        <li>GROUP BY</li>
        <li>HAVING</li>
        <li>ORDER BY</li>
    </ol>    

    <img src="https://www.sisense.com/wp-content/uploads/2024/07/image-1-order-blog.jpg" />

    <img src="https://www.kdnuggets.com/wp-content/uploads/ferrer_essential_guide_sql_execution_order_3.png" />

    <p>Grouping Rules</p>
    <ul>
        <li>Every non-aggregate column that appears in the SELECT clause must also
            appear in the GROUP BY clause.</li>
        <li>You may not use aliases in the HAVING clause.</li>
        <li>You may use aliases in the ORDER BY clause.</li>
        <li>You may only use calculated fields in the HAVING clause.</li>
        <li>You may use calculated field aliases or actual fields in the ORDER BY clause.</li>
    </ul>    
        
        
        
    

    <h3>Methods</h3>

    <pre>
CREATE TABLE EmployeeSalary
(EmployeeID int,
JobTitle varchar(50),
Salary int
);

INSERT INTO EmployeeDemographics VALUES
(1001, 'Jim', 'Halpert', 30, 'Male');</pre>

    <h3>HAVING</h3>
        <p>Condition the selection on values in columns.</p>
    <pre>
SELECT JobTitle, AVG(Salary) AverageSalary
FROM EmployeeDemographics
JOIN EmployeeSalary
    ON EmployeeDemographics.EmployeeID = 
    EmployeeSalary.EmployeeID
GROUP BY JobTitle
HAVING AVG(Salary) > 45000
ORDER BY AVG(Salary)</pre>

    <h3>UPDATE</h3>
        <p>Make data changes to existing records.</p>
    <pre>
UPDATE Students2 
SET email = LOWER(CONCAT(FirstName, '.', LastName, '@CENITCOLLEGE.com'));</pre>

    <h3>USE</h3>
        <p>Switch between databases from script.</p>
    <pre>
USE db1;
USE Northwind;
SELECT * 
FROM Employees;</pre>

    <h3>Temp Tables</h3>
        <p>Valid until the end of the studio session.</p>
    <pre>
CREATE TABLE #temp_Employee2 (
JobTitle varchar(50),
EmployeesPerJob int,
AvgAge int,
AvgSalary int
);

INSERT INTO #temp_Employee2
SELECT JobTitle, COUNT(JobTitle), AVG(Age), AVG(Salary)
FROM EmployeeDemographics emp
JOIN EmployeeSalary sal
	ON emp.EmployeeID = sal.EmployeeID
GROUP BY JobTitle;

Select * FROM #TEMP_EMPLOYEE2;</pre>


    <h3>CTE</h3>

    <p>Common Table Expressions can be used multiple times within the subsequent query.</p>
    <pre>
CREATE TABLE #temp_Employee2 (
JobTitle varchar(50),
EmployeesPerJob int,
AvgAge int,
AvgSalary int
);

INSERT INTO #temp_Employee2
SELECT JobTitle, COUNT(JobTitle), AVG(Age), AVG(Salary)
FROM EmployeeDemographics emp
JOIN EmployeeSalary sal
	ON emp.EmployeeID = sal.EmployeeID
GROUP BY JobTitle;

Select * FROM #TEMP_EMPLOYEE2;</pre>
</section>

{% endblock %}